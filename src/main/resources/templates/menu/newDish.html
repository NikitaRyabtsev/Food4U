<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <link rel="icon" th:href="@{/images/favicon.ico}">
    <link rel="stylesheet" th:href="@{/css/select.css}">
    <link rel="stylesheet" th:href="@{/nav/stylenav.css}">
    <link rel="stylesheet" th:href="@{/nav/leftnav.css}">
    <link rel="stylesheet" th:href="@{/css/header.css}">
    <meta charset="UTF-8">
    <style>
        * {
            box-sizing: border-box;
            font-family: sans-serif;
        }

        .add {
            border: 2px solid #000;
        }

        input {
            margin: 10px 0px;
        }

        .form-new-dish {
            border: 2px solid #000;
            display: flex;
            flex-direction: column;
            align-items: flex-start;
        }
    </style>
    <title>Добавление блюда с ингредиентами</title>
</head>
<body role="main" style="text-align: center">
<header class="header_header">
    <div th:insert="/viewhtml/header :: header"></div>
</header>
<nav>
    <div th:insert="/viewhtml/nav :: nav"></div>
</nav>

<h3>Добавить новое блюдо</h3>
<form class="form-new-dish" th:action="@{/menu/newDish}" th:method="POST" th:object="${dish}" id="newDish">
    <label for="name">Введите название</label>
    <br/>
    <input type="text" th:field="*{name}" id="name" class="add__btn" name="name" required>
    <br/>
    <label>Введите тип</label>
    <br/>
    <select th:field="*{type}" name="type" id="type" class="select">
        <option value="0">Выберите тип</option>
        <option th:each="dish : ${T(by.htp.netcracker.foodfactory.Helper.Type).values()}"
                th:value="${dish}" th:text="${dish.displayValue}">
        </option>
    </select>
    <h4 class="combo-label">Выберите ингредиенты</h4>
<!--    <button class="addIngredient">Добавить ингредиент</button>-->
    <div class="ingredient">
        <select  class="ingredient__select select"  id="ingredient" th:field="*{ingredients}" multiple>
            <option th:each="ingredient:${ingredients}" th:value="${ingredient.id}"
                    th:text="${ingredient.name}"></option>
        </select>
<!--        <input class="ingredient__weigth" type="text" name="weight" value="" required>-->
    </div>
    <!--    <div>-->
    <!--        <input type="text" id="gridProducts"th:field="*{ingredients}">-->
    <!--    </div>-->
<!--    <div id="gridProducts"></div>-->
<!--    <div id="updatedMessage"></div>-->
    <br>

    <label for="price">Введите цену</label>

    <input type="number" th:field="*{price}" id="price" class="add__btn" required>

    <label for="src">Введите путь к картинке</label>

    <input type="text" th:field="*{src}" id="src" name="src"    class="add__btn">

    <input type="submit" value="Создать" class="btn btn-secondary" id="btn">
</form>
<!--        <a href="/menu/newIngredientInDish">-->
<!--            <button type="button">Добавить новый ингредиент</button>>-->
<!--        </a>-->
<footer>
    <div th:insert="/viewhtml/footer :: footer"></div>
</footer>

<script>
    // let form = document.querySelector('.form-new-dish');
    // form.onsubmit = (event) =>{
    //     event.preventDefault();
    //
    //     let formData = new FormData(form);
    //     formData.delete('ingredients');
    //
    //     for(let [name,value] of formData){
    //         console.log(name + ':' + value);
    //
    //     }
    // }
    // const addIngredient = document.querySelector('.addIngredient');
    // addIngredient.onclick = (event) =>{
    //     event.preventDefault();
    //
    //
    //     const ingredient = document.querySelector('.ingredient');
    //     const ingredientWeigth = document.querySelector('.ingredient__weigth');
    //     const select = document.querySelector('.ingredient__select');
    //
    //     if(ingredientWeigth.value == ''){
    //         alert('Введите вес продукта')
    //     } else if(select.options[select.selectedIndex].value == 0) {
    //         alert('Выберите тип ингредиента')
    //     } else{
    //         let clone = ingredient.cloneNode(true);
    //         let cloneChildrens = clone.childNodes;
    //
    //         let inputWeigth = document.createElement('input');
    //         inputWeigth.name = 'ingredient';
    //
    //
    //         cloneChildrens.forEach((item) =>{
    //
    //             if(item.tagName == 'SELECT'){
    //                 inputWeigth.value = item.options[select.selectedIndex].value;
    //                 item.remove();
    //             }
    //
    //         })
    //         let btnDel = document.createElement('button');
    //         btnDel.textContent = 'Удалить ингредиент';
    //         btnDel.className = 'ingredient__del';
    //         btnDel.onclick = () => {
    //             btnDel.parentNode.remove();
    //         }
    //         clone.prepend(inputWeigth);
    //         clone.append(btnDel);
    //         ingredient.after(clone);
    //     }
    // }
</script>

</body>

</html>